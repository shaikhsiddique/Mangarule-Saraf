"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/me";
exports.ids = ["pages/api/auth/me"];
exports.modules = {

/***/ "cookie":
/*!*************************!*\
  !*** external "cookie" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("cookie");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fme&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cme.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fme&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cme.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_me_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\auth\\me.ts */ \"(api)/./pages/api/auth/me.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_me_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_me_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/me\",\n        pathname: \"/api/auth/me\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_auth_me_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZtZSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYXV0aCU1Q21lLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3NEO0FBQ3REO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxrREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsa0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFuZ2FydWxlLXNhcmFmLz84Y2Y2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcYXV0aFxcXFxtZS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvbWVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL21lXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fme&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cme.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/auth/me.ts":
/*!******************************!*\
  !*** ./pages/api/auth/me.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _server_db_connectMongo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../server/db/connectMongo */ \"(api)/./server/db/connectMongo.ts\");\n/* harmony import */ var _server_models_User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../server/models/User */ \"(api)/./server/models/User.ts\");\n/* harmony import */ var _server_utils_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../server/utils/auth */ \"(api)/./server/utils/auth.ts\");\n\n\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") return res.status(405).json({\n        message: \"Method not allowed\"\n    });\n    try {\n        await (0,_server_db_connectMongo__WEBPACK_IMPORTED_MODULE_0__.connectMongo)();\n        const authUser = (0,_server_utils_auth__WEBPACK_IMPORTED_MODULE_2__.getUserFromRequest)(req);\n        if (!authUser) return res.status(401).json({\n            message: \"Unauthorized\"\n        });\n        const user = await _server_models_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(authUser.id).select(\"-password\");\n        if (!user) return res.status(404).json({\n            message: \"User not found\"\n        });\n        return res.status(200).json(user);\n    } catch (e) {\n        return res.status(500).json({\n            message: \"Server error\",\n            error: e?.message || \"unknown\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9tZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQytEO0FBQ2hCO0FBQ2lCO0FBRWpELGVBQWVHLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxPQUFPLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7UUFBRUMsU0FBUztJQUFxQjtJQUN0RixJQUFJO1FBQ0YsTUFBTVQscUVBQVlBO1FBQ2xCLE1BQU1VLFdBQVdSLHNFQUFrQkEsQ0FBQ0U7UUFDcEMsSUFBSSxDQUFDTSxVQUFVLE9BQU9MLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUFlO1FBQ3JFLE1BQU1FLE9BQU8sTUFBTVYsb0VBQWEsQ0FBQ1MsU0FBU0csRUFBRSxFQUFFQyxNQUFNLENBQUM7UUFDckQsSUFBSSxDQUFDSCxNQUFNLE9BQU9OLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUFpQjtRQUNuRSxPQUFPSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDRztJQUM5QixFQUFFLE9BQU9JLEdBQVE7UUFDZixPQUFPVixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBZ0JPLE9BQU9ELEdBQUdOLFdBQVc7UUFBVTtJQUN4RjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFuZ2FydWxlLXNhcmFmLy4vcGFnZXMvYXBpL2F1dGgvbWUudHM/MDI4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHsgY29ubmVjdE1vbmdvIH0gZnJvbSAnLi4vLi4vLi4vc2VydmVyL2RiL2Nvbm5lY3RNb25nbyc7XHJcbmltcG9ydCBVc2VyIGZyb20gJy4uLy4uLy4uL3NlcnZlci9tb2RlbHMvVXNlcic7XHJcbmltcG9ydCB7IGdldFVzZXJGcm9tUmVxdWVzdCB9IGZyb20gJy4uLy4uLy4uL3NlcnZlci91dGlscy9hdXRoJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uZWN0TW9uZ28oKTtcclxuICAgIGNvbnN0IGF1dGhVc2VyID0gZ2V0VXNlckZyb21SZXF1ZXN0KHJlcSk7XHJcbiAgICBpZiAoIWF1dGhVc2VyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGF1dGhVc2VyLmlkKS5zZWxlY3QoJy1wYXNzd29yZCcpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHVzZXIpO1xyXG4gIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ1NlcnZlciBlcnJvcicsIGVycm9yOiBlPy5tZXNzYWdlIHx8ICd1bmtub3duJyB9KTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiY29ubmVjdE1vbmdvIiwiVXNlciIsImdldFVzZXJGcm9tUmVxdWVzdCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImF1dGhVc2VyIiwidXNlciIsImZpbmRCeUlkIiwiaWQiLCJzZWxlY3QiLCJlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/me.ts\n");

/***/ }),

/***/ "(api)/./server/db/connectMongo.ts":
/*!***********************************!*\
  !*** ./server/db/connectMongo.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectMongo: () => (/* binding */ connectMongo)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nlet isConnected = 0; // 0=disconnected, 1=connected\nasync function connectMongo() {\n    if (isConnected) return;\n    const uri = process.env.MONGO_URI;\n    if (!uri) throw new Error(\"MONGO_URI is not set\");\n    if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).readyState === 1) {\n        isConnected = 1;\n        return;\n    }\n    await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(uri, {\n        dbName: process.env.MONGO_DB || undefined\n    });\n    isConnected = 1;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zZXJ2ZXIvZGIvY29ubmVjdE1vbmdvLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxJQUFJQyxjQUFjLEdBQUcsOEJBQThCO0FBRTVDLGVBQWVDO0lBQ3BCLElBQUlELGFBQWE7SUFDakIsTUFBTUUsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxTQUFTO0lBQ2pDLElBQUksQ0FBQ0gsS0FBSyxNQUFNLElBQUlJLE1BQU07SUFDMUIsSUFBSVAsNERBQW1CLENBQUNTLFVBQVUsS0FBSyxHQUFHO1FBQ3hDUixjQUFjO1FBQ2Q7SUFDRjtJQUNBLE1BQU1ELHVEQUFnQixDQUFDRyxLQUFLO1FBQUVRLFFBQVFQLFFBQVFDLEdBQUcsQ0FBQ08sUUFBUSxJQUFJQztJQUFVO0lBQ3hFWixjQUFjO0FBQ2hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFuZ2FydWxlLXNhcmFmLy4vc2VydmVyL2RiL2Nvbm5lY3RNb25nby50cz84OTEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcblxyXG5sZXQgaXNDb25uZWN0ZWQgPSAwOyAvLyAwPWRpc2Nvbm5lY3RlZCwgMT1jb25uZWN0ZWRcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0TW9uZ28oKSB7XHJcbiAgaWYgKGlzQ29ubmVjdGVkKSByZXR1cm47XHJcbiAgY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuTU9OR09fVVJJO1xyXG4gIGlmICghdXJpKSB0aHJvdyBuZXcgRXJyb3IoJ01PTkdPX1VSSSBpcyBub3Qgc2V0Jyk7XHJcbiAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSA9PT0gMSkge1xyXG4gICAgaXNDb25uZWN0ZWQgPSAxO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBhd2FpdCBtb25nb29zZS5jb25uZWN0KHVyaSwgeyBkYk5hbWU6IHByb2Nlc3MuZW52Lk1PTkdPX0RCIHx8IHVuZGVmaW5lZCB9KTtcclxuICBpc0Nvbm5lY3RlZCA9IDE7XHJcbn1cclxuXHJcblxyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJpc0Nvbm5lY3RlZCIsImNvbm5lY3RNb25nbyIsInVyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkkiLCJFcnJvciIsImNvbm5lY3Rpb24iLCJyZWFkeVN0YXRlIiwiY29ubmVjdCIsImRiTmFtZSIsIk1PTkdPX0RCIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./server/db/connectMongo.ts\n");

/***/ }),

/***/ "(api)/./server/models/User.ts":
/*!*******************************!*\
  !*** ./server/models/User.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst CartItemSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    id: {\n        type: String,\n        required: true\n    },\n    name: {\n        type: String,\n        required: true\n    },\n    image: {\n        type: String,\n        required: true\n    },\n    price: {\n        type: String,\n        required: true\n    },\n    type: {\n        type: String,\n        required: true\n    },\n    quantity: {\n        type: Number,\n        required: true,\n        default: 1\n    }\n}, {\n    _id: false\n});\nconst UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: true\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true,\n        index: true\n    },\n    password: {\n        type: String,\n        required: true\n    },\n    phone: {\n        type: String,\n        required: true\n    },\n    cart: {\n        type: [\n            CartItemSchema\n        ],\n        default: []\n    }\n}, {\n    timestamps: true\n});\nconst User = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.User || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"User\", UserSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (User);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zZXJ2ZXIvbW9kZWxzL1VzZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJEO0FBRTNELE1BQU1HLGlCQUFpQixJQUFJSCw0Q0FBTUEsQ0FBQztJQUNoQ0ksSUFBSTtRQUFFQyxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDbkNDLE1BQU07UUFBRUgsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3JDRSxPQUFPO1FBQUVKLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUN0Q0csT0FBTztRQUFFTCxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDdENGLE1BQU07UUFBRUEsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3JDSSxVQUFVO1FBQUVOLE1BQU1PO1FBQVFMLFVBQVU7UUFBTU0sU0FBUztJQUFFO0FBQ3ZELEdBQUc7SUFBRUMsS0FBSztBQUFNO0FBRWhCLE1BQU1DLGFBQWEsSUFBSWYsNENBQU1BLENBQUM7SUFDNUJRLE1BQU07UUFBRUgsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3JDUyxPQUFPO1FBQUVYLE1BQU1DO1FBQVFDLFVBQVU7UUFBTVUsUUFBUTtRQUFNQyxPQUFPO0lBQUs7SUFDakVDLFVBQVU7UUFBRWQsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3pDYSxPQUFPO1FBQUVmLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUN0Q2MsTUFBTTtRQUFFaEIsTUFBTTtZQUFDRjtTQUFlO1FBQUVVLFNBQVMsRUFBRTtJQUFDO0FBQzlDLEdBQUc7SUFBRVMsWUFBWTtBQUFLO0FBRXRCLE1BQU1DLE9BQU90Qiw0Q0FBTUEsQ0FBQ3NCLElBQUksSUFBSXJCLCtDQUFLQSxDQUFDLFFBQVFhO0FBQzFDLGlFQUFlUSxJQUFJQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFuZ2FydWxlLXNhcmFmLy4vc2VydmVyL21vZGVscy9Vc2VyLnRzPzkyZDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSwgbW9kZWxzLCBtb2RlbCB9IGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IENhcnRJdGVtU2NoZW1hID0gbmV3IFNjaGVtYSh7XHJcbiAgaWQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIGltYWdlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBwcmljZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgdHlwZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgcXVhbnRpdHk6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogMSB9LFxyXG59LCB7IF9pZDogZmFsc2UgfSk7XHJcblxyXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XHJcbiAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgZW1haWw6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlLCBpbmRleDogdHJ1ZSB9LFxyXG4gIHBhc3N3b3JkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBwaG9uZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgY2FydDogeyB0eXBlOiBbQ2FydEl0ZW1TY2hlbWFdLCBkZWZhdWx0OiBbXSB9LFxyXG59LCB7IHRpbWVzdGFtcHM6IHRydWUgfSk7XHJcblxyXG5jb25zdCBVc2VyID0gbW9kZWxzLlVzZXIgfHwgbW9kZWwoJ1VzZXInLCBVc2VyU2NoZW1hKTtcclxuZXhwb3J0IGRlZmF1bHQgVXNlcjtcclxuXHJcblxyXG4iXSwibmFtZXMiOlsiU2NoZW1hIiwibW9kZWxzIiwibW9kZWwiLCJDYXJ0SXRlbVNjaGVtYSIsImlkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwibmFtZSIsImltYWdlIiwicHJpY2UiLCJxdWFudGl0eSIsIk51bWJlciIsImRlZmF1bHQiLCJfaWQiLCJVc2VyU2NoZW1hIiwiZW1haWwiLCJ1bmlxdWUiLCJpbmRleCIsInBhc3N3b3JkIiwicGhvbmUiLCJjYXJ0IiwidGltZXN0YW1wcyIsIlVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./server/models/User.ts\n");

/***/ }),

/***/ "(api)/./server/utils/auth.ts":
/*!******************************!*\
  !*** ./server/utils/auth.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserFromRequest: () => (/* binding */ getUserFromRequest),\n/* harmony export */   setAuthCookie: () => (/* binding */ setAuthCookie),\n/* harmony export */   signToken: () => (/* binding */ signToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cookie */ \"cookie\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cookie__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"dev_secret_change_me\";\nconst COOKIE_NAME = \"ms_token\";\nfunction signToken(payload) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, JWT_SECRET, {\n        expiresIn: \"7d\"\n    });\n}\nfunction setAuthCookie(res, token) {\n    const serialized = cookie__WEBPACK_IMPORTED_MODULE_1___default().serialize(COOKIE_NAME, token, {\n        httpOnly: true,\n        sameSite: \"lax\",\n        secure: \"development\" === \"production\",\n        path: \"/\",\n        maxAge: 7 * 24 * 60 * 60\n    });\n    res.setHeader(\"Set-Cookie\", serialized);\n}\nfunction getUserFromRequest(req) {\n    try {\n        const cookies = req.headers.cookie ? cookie__WEBPACK_IMPORTED_MODULE_1___default().parse(req.headers.cookie) : {};\n        const token = cookies[COOKIE_NAME];\n        if (!token) return null;\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        return {\n            id: decoded.id,\n            email: decoded.email\n        };\n    } catch  {\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zZXJ2ZXIvdXRpbHMvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQStCO0FBRUg7QUFFNUIsTUFBTUUsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVLElBQUk7QUFDN0MsTUFBTUcsY0FBYztBQUViLFNBQVNDLFVBQVVDLE9BQWU7SUFDdkMsT0FBT1Asd0RBQVEsQ0FBQ08sU0FBU0wsWUFBWTtRQUFFTyxXQUFXO0lBQUs7QUFDekQ7QUFFTyxTQUFTQyxjQUFjQyxHQUFvQixFQUFFQyxLQUFhO0lBQy9ELE1BQU1DLGFBQWFaLHVEQUFnQixDQUFDSSxhQUFhTyxPQUFPO1FBQ3RERyxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsUUFBUWQsa0JBQXlCO1FBQ2pDZSxNQUFNO1FBQ05DLFFBQVEsSUFBSSxLQUFLLEtBQUs7SUFDeEI7SUFDQVIsSUFBSVMsU0FBUyxDQUFDLGNBQWNQO0FBQzlCO0FBRU8sU0FBU1EsbUJBQW1CQyxHQUFtQjtJQUNwRCxJQUFJO1FBQ0YsTUFBTUMsVUFBVUQsSUFBSUUsT0FBTyxDQUFDdkIsTUFBTSxHQUFHQSxtREFBWSxDQUFDcUIsSUFBSUUsT0FBTyxDQUFDdkIsTUFBTSxJQUFJLENBQUM7UUFDekUsTUFBTVcsUUFBUVcsT0FBTyxDQUFDbEIsWUFBWTtRQUNsQyxJQUFJLENBQUNPLE9BQU8sT0FBTztRQUNuQixNQUFNYyxVQUFVMUIsMERBQVUsQ0FBQ1ksT0FBT1Y7UUFDbEMsT0FBTztZQUFFMEIsSUFBSUYsUUFBUUUsRUFBRTtZQUFFQyxPQUFPSCxRQUFRRyxLQUFLO1FBQUM7SUFDaEQsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYW5nYXJ1bGUtc2FyYWYvLi9zZXJ2ZXIvdXRpbHMvYXV0aC50cz8xMjk2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcclxuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCBjb29raWUgZnJvbSAnY29va2llJztcclxuXHJcbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICdkZXZfc2VjcmV0X2NoYW5nZV9tZSc7XHJcbmNvbnN0IENPT0tJRV9OQU1FID0gJ21zX3Rva2VuJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaWduVG9rZW4ocGF5bG9hZDogb2JqZWN0KSB7XHJcbiAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIEpXVF9TRUNSRVQsIHsgZXhwaXJlc0luOiAnN2QnIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0QXV0aENvb2tpZShyZXM6IE5leHRBcGlSZXNwb25zZSwgdG9rZW46IHN0cmluZykge1xyXG4gIGNvbnN0IHNlcmlhbGl6ZWQgPSBjb29raWUuc2VyaWFsaXplKENPT0tJRV9OQU1FLCB0b2tlbiwge1xyXG4gICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICBzYW1lU2l0ZTogJ2xheCcsXHJcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXHJcbiAgICBwYXRoOiAnLycsXHJcbiAgICBtYXhBZ2U6IDcgKiAyNCAqIDYwICogNjAsXHJcbiAgfSk7XHJcbiAgcmVzLnNldEhlYWRlcignU2V0LUNvb2tpZScsIHNlcmlhbGl6ZWQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlckZyb21SZXF1ZXN0KHJlcTogTmV4dEFwaVJlcXVlc3QpOiB7IGlkOiBzdHJpbmc7IGVtYWlsOiBzdHJpbmcgfSB8IG51bGwge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjb29raWVzID0gcmVxLmhlYWRlcnMuY29va2llID8gY29va2llLnBhcnNlKHJlcS5oZWFkZXJzLmNvb2tpZSkgOiB7fTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llc1tDT09LSUVfTkFNRV07XHJcbiAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbDtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBhbnk7XHJcbiAgICByZXR1cm4geyBpZDogZGVjb2RlZC5pZCwgZW1haWw6IGRlY29kZWQuZW1haWwgfTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJqd3QiLCJjb29raWUiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsIkNPT0tJRV9OQU1FIiwic2lnblRva2VuIiwicGF5bG9hZCIsInNpZ24iLCJleHBpcmVzSW4iLCJzZXRBdXRoQ29va2llIiwicmVzIiwidG9rZW4iLCJzZXJpYWxpemVkIiwic2VyaWFsaXplIiwiaHR0cE9ubHkiLCJzYW1lU2l0ZSIsInNlY3VyZSIsInBhdGgiLCJtYXhBZ2UiLCJzZXRIZWFkZXIiLCJnZXRVc2VyRnJvbVJlcXVlc3QiLCJyZXEiLCJjb29raWVzIiwiaGVhZGVycyIsInBhcnNlIiwiZGVjb2RlZCIsInZlcmlmeSIsImlkIiwiZW1haWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./server/utils/auth.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fme&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cme.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();